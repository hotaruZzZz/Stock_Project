use django;
SET SQL_SAFE_UPDATES=0;
delete from stock_data_data where sDate < '2012-07-01' and sDate > '2012-01-01';

select sDate from stock_data_data where sDate < '2011-07-01' and sDate > '2011-05-05';

ALTER TABLE stock_data_data DROP PRIMARY KEY;
ALTER TABLE stock_data_data modify column id INT NOT NULL; 
ALTER TABLE stock_data_data ADD PRIMARY KEY(`id`,`sDate`);
ALTER TABLE stock_data_data MODIFY id INT  NOT NULL AUTO_INCREMENT;  
ALTER TABLE stock_data_data MODIFY sDate datetime;  

ALTER TABLE stock_data_data partition by range(to_days(sDate))
(
 partition ym_200701 values less than (to_days('2007-02-01 00:00:00')),
 partition ym_200702 values less than (to_days('2007-03-01 00:00:00')),
 partition ym_200703 values less than (to_days('2007-04-01 00:00:00')),
 partition ym_200704 values less than (to_days('2007-05-01 00:00:00')),
 partition ym_200705 values less than (to_days('2007-06-01 00:00:00')),
 partition ym_200706 values less than (to_days('2007-07-01 00:00:00')),
 partition ym_200707 values less than (to_days('2007-08-01 00:00:00')),
 partition ym_200708 values less than (to_days('2007-09-01 00:00:00')),
 partition ym_200709 values less than (to_days('2007-10-01 00:00:00')),
 partition ym_200710 values less than (to_days('2007-11-01 00:00:00')),
 partition ym_200711 values less than (to_days('2007-12-01 00:00:00')),
 partition ym_200712 values less than (to_days('2008-01-01 00:00:00')),
 partition ym_200801 values less than (to_days('2008-02-01 00:00:00')),
 partition ym_200802 values less than (to_days('2008-03-01 00:00:00')),
 partition ym_200803 values less than (to_days('2008-04-01 00:00:00')),
 partition ym_200804 values less than (to_days('2008-05-01 00:00:00')),
 partition ym_200805 values less than (to_days('2008-06-01 00:00:00')),
 partition ym_200806 values less than (to_days('2008-07-01 00:00:00')),
 partition ym_200807 values less than (to_days('2008-08-01 00:00:00')),
 partition ym_200808 values less than (to_days('2008-09-01 00:00:00')),
 partition ym_200809 values less than (to_days('2008-10-01 00:00:00')),
 partition ym_200810 values less than (to_days('2008-11-01 00:00:00')),
 partition ym_200811 values less than (to_days('2008-12-01 00:00:00')),
 partition ym_200812 values less than (to_days('2009-01-01 00:00:00')),
 partition ym_200901 values less than (to_days('2009-02-01 00:00:00')),
 partition ym_200902 values less than (to_days('2009-03-01 00:00:00')),
 partition ym_200903 values less than (to_days('2009-04-01 00:00:00')),
 partition ym_200904 values less than (to_days('2009-05-01 00:00:00')),
 partition ym_200905 values less than (to_days('2009-06-01 00:00:00')),
 partition ym_200906 values less than (to_days('2009-07-01 00:00:00')),
 partition ym_200907 values less than (to_days('2009-08-01 00:00:00')),
 partition ym_200908 values less than (to_days('2009-09-01 00:00:00')),
 partition ym_200909 values less than (to_days('2009-10-01 00:00:00')),
 partition ym_200910 values less than (to_days('2009-11-01 00:00:00')),
 partition ym_200911 values less than (to_days('2009-12-01 00:00:00')),
 partition ym_200912 values less than (to_days('2010-01-01 00:00:00')),
 partition ym_201001 values less than (to_days('2010-02-01 00:00:00')),
 partition ym_201002 values less than (to_days('2010-03-01 00:00:00')),
 partition ym_201003 values less than (to_days('2010-04-01 00:00:00')),
 partition ym_201004 values less than (to_days('2010-05-01 00:00:00')),
 partition ym_201005 values less than (to_days('2010-06-01 00:00:00')),
 partition ym_201006 values less than (to_days('2010-07-01 00:00:00')),
 partition ym_201007 values less than (to_days('2010-08-01 00:00:00')),
 partition ym_201008 values less than (to_days('2010-09-01 00:00:00')),
 partition ym_201009 values less than (to_days('2010-10-01 00:00:00')),
 partition ym_201010 values less than (to_days('2010-11-01 00:00:00')),
 partition ym_201011 values less than (to_days('2010-12-01 00:00:00')),
 partition ym_201012 values less than (to_days('2011-01-01 00:00:00')),
 partition ym_201101 values less than (to_days('2011-02-01 00:00:00')),
 partition ym_201102 values less than (to_days('2011-03-01 00:00:00')),
 partition ym_201103 values less than (to_days('2011-04-01 00:00:00')),
 partition ym_201104 values less than (to_days('2011-05-01 00:00:00')),
 partition ym_201105 values less than (to_days('2011-06-01 00:00:00')),
 partition ym_201106 values less than (to_days('2011-07-01 00:00:00')),
 partition ym_201107 values less than (to_days('2011-08-01 00:00:00')),
 partition ym_201108 values less than (to_days('2011-09-01 00:00:00')),
 partition ym_201109 values less than (to_days('2011-10-01 00:00:00')),
 partition ym_201110 values less than (to_days('2011-11-01 00:00:00')),
 partition ym_201111 values less than (to_days('2011-12-01 00:00:00')),
 partition ym_201112 values less than (to_days('2012-01-01 00:00:00')),
 partition ym_201201 values less than (to_days('2012-02-01 00:00:00')),
 partition ym_201202 values less than (to_days('2012-03-01 00:00:00')),
 partition ym_201203 values less than (to_days('2012-04-01 00:00:00')),
 partition ym_201204 values less than (to_days('2012-05-01 00:00:00')),
 partition ym_201205 values less than (to_days('2012-06-01 00:00:00')),
 partition ym_201206 values less than (to_days('2012-07-01 00:00:00')),
 partition ym_201207 values less than (to_days('2012-08-01 00:00:00')),
 partition ym_201208 values less than (to_days('2012-09-01 00:00:00')),
 partition ym_201209 values less than (to_days('2012-10-01 00:00:00')),
 partition ym_201210 values less than (to_days('2012-11-01 00:00:00')),
 partition ym_201211 values less than (to_days('2012-12-01 00:00:00')),
 partition ym_201212 values less than (to_days('2013-01-01 00:00:00')),
 partition ym_201301 values less than (to_days('2013-02-01 00:00:00')),
 partition ym_201302 values less than (to_days('2013-03-01 00:00:00')),
 partition ym_201303 values less than (to_days('2013-04-01 00:00:00')),
 partition ym_201304 values less than (to_days('2013-05-01 00:00:00')),
 partition ym_201305 values less than (to_days('2013-06-01 00:00:00')),
 partition ym_201306 values less than (to_days('2013-07-01 00:00:00')),
 partition ym_201307 values less than (to_days('2013-08-01 00:00:00')),
 partition ym_201308 values less than (to_days('2013-09-01 00:00:00')),
 partition ym_201309 values less than (to_days('2013-10-01 00:00:00')),
 partition ym_201310 values less than (to_days('2013-11-01 00:00:00')),
 partition ym_201311 values less than (to_days('2013-12-01 00:00:00')),
 partition ym_201312 values less than (to_days('2014-01-01 00:00:00')),
 partition ym_201401 values less than (to_days('2014-02-01 00:00:00')),
 partition ym_201402 values less than (to_days('2014-03-01 00:00:00')),
 partition ym_201403 values less than (to_days('2014-04-01 00:00:00')),
 partition ym_201404 values less than (to_days('2014-05-01 00:00:00')),
 partition ym_201405 values less than (to_days('2014-06-01 00:00:00')),
 partition ym_201406 values less than (to_days('2014-07-01 00:00:00')),
 partition ym_201407 values less than (to_days('2014-08-01 00:00:00')),
 partition ym_201408 values less than (to_days('2014-09-01 00:00:00')),
 partition ym_201409 values less than (to_days('2014-10-01 00:00:00')),
 partition ym_201410 values less than (to_days('2014-11-01 00:00:00')),
 partition ym_201411 values less than (to_days('2014-12-01 00:00:00')),
 partition ym_201412 values less than (to_days('2015-01-01 00:00:00')),
 partition ym_201501 values less than (to_days('2015-02-01 00:00:00')),
 partition ym_201502 values less than (to_days('2015-03-01 00:00:00')),
 partition ym_201503 values less than (to_days('2015-04-01 00:00:00')),
 partition ym_201504 values less than (to_days('2015-05-01 00:00:00')),
 partition ym_201505 values less than (to_days('2015-06-01 00:00:00')),
 partition ym_201506 values less than (to_days('2015-07-01 00:00:00')),
 partition ym_201507 values less than (to_days('2015-08-01 00:00:00')),
 partition ym_201508 values less than (to_days('2015-09-01 00:00:00')),
 partition ym_201509 values less than (to_days('2015-10-01 00:00:00')),
 partition ym_201510 values less than (to_days('2015-11-01 00:00:00')),
 partition ym_201511 values less than (to_days('2015-12-01 00:00:00')),
 partition ym_201512 values less than (to_days('2016-01-01 00:00:00')),
 partition ym_201601 values less than (to_days('2016-02-01 00:00:00')),
 partition ym_201602 values less than (to_days('2016-03-01 00:00:00')),
 partition ym_201603 values less than (to_days('2016-04-01 00:00:00')),
 partition ym_201604 values less than (to_days('2016-05-01 00:00:00')),
 partition ym_201605 values less than (to_days('2016-06-01 00:00:00')),
 partition ym_201606 values less than (to_days('2016-07-01 00:00:00')),
 partition ym_201607 values less than (to_days('2016-08-01 00:00:00')),
 partition ym_201608 values less than (to_days('2016-09-01 00:00:00')),
 partition ym_201609 values less than (to_days('2016-10-01 00:00:00')),
 partition ym_201610 values less than (to_days('2016-11-01 00:00:00')),
 partition ym_201611 values less than (to_days('2016-12-01 00:00:00')),
 partition ym_201612 values less than (to_days('2017-01-01 00:00:00')),
 partition ym_201701 values less than (to_days('2017-02-01 00:00:00')),
 partition ym_201702 values less than (to_days('2017-03-01 00:00:00')),
 partition ym_201703 values less than (to_days('2017-04-01 00:00:00')),
 partition ym_201704 values less than (to_days('2017-05-01 00:00:00')),
 partition ym_201705 values less than (to_days('2017-06-01 00:00:00')),
 partition ym_201706 values less than (to_days('2017-07-01 00:00:00')),
 partition ym_201707 values less than (to_days('2017-08-01 00:00:00')),
 partition ym_201708 values less than (to_days('2017-09-01 00:00:00')),
 partition ym_201709 values less than (to_days('2017-10-01 00:00:00')),
 partition ym_201710 values less than (to_days('2017-11-01 00:00:00')),
 partition ym_201711 values less than (to_days('2017-12-01 00:00:00')),
 partition ym_201712 values less than (to_days('2018-01-01 00:00:00')),
 partition ym_201801 values less than (to_days('2018-02-01 00:00:00')),
 partition ym_201802 values less than (to_days('2018-03-01 00:00:00')),
 partition ym_201803 values less than (to_days('2018-04-01 00:00:00')),
 partition ym_201804 values less than (to_days('2018-05-01 00:00:00')),
 partition ym_201805 values less than (to_days('2018-06-01 00:00:00')),
 partition ym_201806 values less than (to_days('2018-07-01 00:00:00')),
 partition ym_201807 values less than (to_days('2018-08-01 00:00:00')),
 partition ym_201808 values less than (to_days('2018-09-01 00:00:00')),
 partition ym_201809 values less than (to_days('2018-10-01 00:00:00')),
 partition ym_201810 values less than (to_days('2018-11-01 00:00:00')),
 partition ym_201811 values less than (to_days('2018-12-01 00:00:00')),
 partition ym_201812 values less than (to_days('2019-01-01 00:00:00')),
 partition ym_201901 values less than (to_days('2019-02-01 00:00:00')),
 partition ym_201902 values less than (to_days('2019-03-01 00:00:00')),
 partition ym_201903 values less than (to_days('2019-04-01 00:00:00')),
 partition ym_201904 values less than (to_days('2019-05-01 00:00:00')),
 partition ym_201905 values less than (to_days('2019-06-01 00:00:00')),
 partition ym_201906 values less than (to_days('2019-07-01 00:00:00')),
 partition ym_201907 values less than (to_days('2019-08-01 00:00:00')),
 partition ym_201908 values less than (to_days('2019-09-01 00:00:00')),
 partition ym_201909 values less than (to_days('2019-10-01 00:00:00')),
 partition ym_201910 values less than (to_days('2019-11-01 00:00:00')),
 partition ym_201911 values less than (to_days('2019-12-01 00:00:00')),
 partition ym_201912 values less than (to_days('2020-01-01 00:00:00')),
 partition ym_202001 values less than (to_days('2020-02-01 00:00:00')),
 partition ym_202002 values less than (to_days('2020-03-01 00:00:00')),
 partition ym_202003 values less than (to_days('2020-04-01 00:00:00')),
 partition ym_202004 values less than (to_days('2020-05-01 00:00:00')),
 partition ym_202005 values less than (to_days('2020-06-01 00:00:00')),
 partition ym_202006 values less than (to_days('2020-07-01 00:00:00')),
 partition ym_202007 values less than (to_days('2020-08-01 00:00:00')), 
 partition ym_202008 values less than (to_days('2020-09-01 00:00:00')), 
 partition ym_202009 values less than (to_days('2020-10-01 00:00:00')), 
 partition ym_202010 values less than (to_days('2020-11-01 00:00:00')), 
 partition ym_202011 values less than (to_days('2020-12-01 00:00:00')), 
 partition ym_202012 values less than (to_days('2021-01-01 00:00:00')), 
 partition ym_202101 values less than (to_days('2021-02-01 00:00:00')), 
 partition ym_202102 values less than (to_days('2021-03-01 00:00:00')), 
 partition ym_202103 values less than (to_days('2021-04-01 00:00:00')), 
 partition ym_202104 values less than (to_days('2021-05-01 00:00:00')), 
 partition ym_202105 values less than (to_days('2021-06-01 00:00:00')), 
 partition ym_202106 values less than (to_days('2021-07-01 00:00:00')), 
 partition ym_202107 values less than (to_days('2021-08-01 00:00:00')), 
 partition ym_202108 values less than (to_days('2021-09-01 00:00:00')), 
 partition ym_202109 values less than (to_days('2021-10-01 00:00:00')), 
 partition ym_202110 values less than (to_days('2021-11-01 00:00:00')), 
 partition ym_202111 values less than (to_days('2021-12-01 00:00:00')), 
 partition ym_202112 values less than (to_days('2022-01-01 00:00:00')), 
 partition ym_202201 values less than (to_days('2022-02-01 00:00:00')), 
 partition ym_202202 values less than (to_days('2022-03-01 00:00:00')), 
 partition ym_202203 values less than (to_days('2022-04-01 00:00:00')), 
 partition ym_202204 values less than (to_days('2022-05-01 00:00:00')), 
 partition ym_202205 values less than (to_days('2022-06-01 00:00:00')), 
 partition ym_202206 values less than (to_days('2022-07-01 00:00:00')), 
 partition ym_202207 values less than (to_days('2022-08-01 00:00:00')), 
 partition ym_202208 values less than (to_days('2022-09-01 00:00:00')), 
 partition ym_202209 values less than (to_days('2022-10-01 00:00:00')), 
 partition ym_202210 values less than (to_days('2022-11-01 00:00:00')),
 partition ym_202211 values less than (to_days('2022-12-01 00:00:00')),
 partition ym_202212 values less than (to_days('2023-01-01 00:00:00')),
 partition ym_202301 values less than (to_days('2023-02-01 00:00:00')),
 partition ym_202302 values less than (to_days('2023-03-01 00:00:00')),
 partition ym_202303 values less than (to_days('2023-04-01 00:00:00')),
 partition ym_202304 values less than (to_days('2023-05-01 00:00:00')),
 partition ym_202305 values less than (to_days('2023-06-01 00:00:00')),
 partition ym_202306 values less than (to_days('2023-07-01 00:00:00')),
 partition ym_202307 values less than (to_days('2023-08-01 00:00:00')),
 partition ym_202308 values less than (to_days('2023-09-01 00:00:00')),
 partition ym_202309 values less than (to_days('2023-10-01 00:00:00')),
 partition ym_202310 values less than (to_days('2023-11-01 00:00:00')),
 partition ym_202311 values less than (to_days('2023-12-01 00:00:00')),
 partition ym_202312 values less than (to_days('2024-10-01 00:00:00'))
);  

explain select * from stock_data_data  where sdate = '20211201';

insert into  stock_data_data value ( null, '元大台灣50', '0050', '20230104',110.30,110.80,110.10,110.50,0.25,'-',110.50,87,110.45,19,0.00,1569704151,14211742,11908);
